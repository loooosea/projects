import type { ScrapedArticle } from '../parser/web-scraper.js';

export function buildPrompt(article: ScrapedArticle): string {
  return `당신은 뇌과학/신경과학 전문 콘텐츠 크리에이터입니다.
아래 영문 기사를 바탕으로 한국어 콘텐츠 3가지를 생성해주세요.

## 원문 정보
- 제목: ${article.title}
- 출처: ${article.siteName || article.url}
- 저자: ${article.author || '알 수 없음'}
- URL: ${article.url}

## 원문 내용
${article.content}

---

아래 3가지 형태의 콘텐츠를 생성해주세요. 각 섹션은 반드시 해당 헤더로 시작해야 합니다.

## 릴스 대본

60초 분량의 인스타그램 릴스 대본을 작성해주세요.

**형식 규칙:**
- 반말(~해, ~야, ~지) 사용
- 5개 파트 구조: 훅(처음 3초) → 문제 제기 → 핵심 내용 → 실천 팁 → CTA
- 각 파트마다 [연출 지시]를 괄호 안에 포함 (예: [카메라 클로즈업], [텍스트 오버레이: 핵심 수치])
- 시청자의 관심을 끌 수 있는 강한 훅으로 시작
- 핵심 연구 결과를 쉽고 흥미롭게 전달
- 일상에서 바로 실천할 수 있는 팁 1-2개 포함
- 마지막에 "저장하고 친구에게 공유해!" 같은 CTA

**예시 구조:**
[훅 - 카메라 정면 응시]
"잠을 못 자면 뇌에서 ○○가 일어나는 거 알아?"

[문제 제기 - B롤 삽입]
실제로 연구에 따르면...

[핵심 - 텍스트 오버레이]
...

[실천 팁 - 리스트 형식]
...

[CTA - 카메라 정면]
"이 영상 저장해두고..."

## 카드 뉴스

7-10장 분량의 인스타그램 카드 뉴스를 작성해주세요.

**형식 규칙:**
- 존댓말(~합니다, ~해요) 사용
- 구조: 표지(1장) → 내용(5-7장) → 실천 팁(1장) → CTA(1장)
- 각 장마다 [비주얼 가이드]를 포함 (배경색, 아이콘, 일러스트 제안)
- 한 장당 핵심 메시지 1개, 텍스트는 3줄 이내
- 숫자와 통계를 적극 활용
- 쉬운 단어로 전문 용어 풀어서 설명

**예시 형식:**
[1장 - 표지]
비주얼: 뇌 일러스트 + 그라데이션 배경
제목: "○○하면 뇌가 젊어진다?"
부제: 최신 연구가 밝힌 놀라운 사실

[2장]
비주얼: 인포그래픽 스타일
"연구 결과, ○○을 하면
뇌 기능이 XX% 향상됩니다"

...

[마지막 장 - CTA]
비주얼: 심플 배경 + 계정 태그
"더 많은 뇌과학 이야기가 궁금하다면
팔로우하고 알림 설정하세요! 🔔"

## 블로그 포스팅

네이버 블로그 스타일의 포스팅을 작성해주세요.

**형식 규칙:**
- 1500-2500자 분량
- 존댓말(~합니다, ~해요) 사용
- SEO 키워드를 자연스럽게 포함 (뇌건강, 치매예방, 인지기능, 기억력 등)
- 소제목으로 섹션 구분 (■ 또는 ▶ 사용)
- 넓은 줄간격 스타일 (문단 사이 빈 줄)
- [사진 위치] 표시 포함 (예: [사진: 뇌 구조 이미지])
- 인용 연구는 "~에 따르면" 형식으로 출처 표시
- 마지막에 핵심 요약 박스 + 관련 해시태그 10개

**구조:**
1. 도입 (흥미로운 질문이나 통계로 시작)
2. 연구 소개 (어디서, 누가, 어떻게)
3. 핵심 발견 (결과와 의미)
4. 일상 적용법 (실천 팁 3-5개)
5. 마무리 (핵심 요약 + 해시태그)

**해시태그 예시:**
#뇌건강 #치매예방 #인지기능 #기억력향상 #뇌과학 #신경과학 #건강정보 #브레인푸드 #뇌운동 #건강습관`;
}
